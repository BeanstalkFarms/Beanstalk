(function(o,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.VerticalLine={}))})(this,function(o){"use strict";var x=Object.defineProperty;var w=(o,s,n)=>s in o?x(o,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[s]=n;var i=(o,s,n)=>(w(o,typeof s!="symbol"?s+"":s,n),n);function s(r){return Math.floor(r*.5)}function n(r,t,e=1,l){const c=Math.round(t*r),h=l?e:Math.round(e*t),f=s(h);return{position:c-f,length:h}}class a{constructor(t,e){i(this,"_x",null);i(this,"_options");this._x=t,this._options=e}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._x===null)return;const l=e.context,c=n(this._x,e.horizontalPixelRatio,this._options.width);l.fillStyle=this._options.color,l.fillRect(c.position,0,c.length,e.bitmapSize.height)})}}class u{constructor(t,e){i(this,"_source");i(this,"_x",null);i(this,"_options");this._source=t,this._options=e}update(){const t=this._source._chart.timeScale();this._x=t.timeToCoordinate(this._source._time)}renderer(){return new a(this._x,this._options)}}class _{constructor(t,e){i(this,"_source");i(this,"_x",null);i(this,"_options");this._source=t,this._options=e}update(){const t=this._source._chart.timeScale();this._x=t.timeToCoordinate(this._source._time)}visible(){return this._options.showLabel}tickVisible(){return this._options.showLabel}coordinate(){return this._x??0}text(){return this._options.labelText}textColor(){return this._options.labelTextColor}backColor(){return this._options.labelBackgroundColor}}const p={color:"green",labelText:"",width:3,labelBackgroundColor:"green",labelTextColor:"white",showLabel:!1};class d{constructor(t,e,l,c){i(this,"_chart");i(this,"_series");i(this,"_time");i(this,"_paneViews");i(this,"_timeAxisViews");const h={...p,...c};this._chart=t,this._series=e,this._time=l,this._paneViews=[new u(this,h)],this._timeAxisViews=[new _(this,h)]}updateAllViews(){this._paneViews.forEach(t=>t.update()),this._timeAxisViews.forEach(t=>t.update())}timeAxisViews(){return this._timeAxisViews}paneViews(){return this._paneViews}}o.VertLine=d,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
